import os
from gtts import gTTS

# 假名数据
seion = [
    ['あ', 'a', 'ア'], ['い', 'i', 'イ'], ['う', 'u', 'ウ'],
    ['え', 'e', 'エ'], ['お', 'o', 'オ'], ['か', 'ka', 'カ'],
    ['き', 'ki', 'キ'], ['く', 'ku', 'ク'], ['け', 'ke', 'ケ'],
    ['こ', 'ko', 'コ'], ['さ', 'sa', 'サ'], ['し', 'shi', 'シ'],
    ['す', 'su', 'ス'], ['せ', 'se', 'セ'], ['そ', 'so', 'ソ'],
    ['た', 'ta', 'タ'], ['ち', 'chi', 'チ'], ['つ', 'tsu', 'ツ'],
    ['て', 'te', 'テ'], ['と', 'to', 'ト'], ['な', 'na', 'ナ'],
    ['に', 'ni', 'ニ'], ['ぬ', 'nu', 'ヌ'], ['ね', 'ne', 'ネ'],
    ['の', 'no', 'ノ'], ['は', 'ha', 'ハ'], ['ひ', 'hi', 'ヒ'],
    ['ふ', 'fu', 'フ'], ['へ', 'he', 'ヘ'], ['ほ', 'ho', 'ホ'],
    ['ま', 'ma', 'マ'], ['み', 'mi', 'ミ'], ['む', 'mu', 'ム'],
    ['め', 'me', 'メ'], ['も', 'mo', 'モ'], ['や', 'ya', 'ヤ'],
    ['ゆ', 'yu', 'ユ'], ['よ', 'yo', 'ヨ'], ['ら', 'ra', 'ラ'],
    ['り', 'ri', 'リ'], ['る', 'ru', 'ル'], ['れ', 're', 'レ'],
    ['ろ', 'ro', 'ロ'], ['わ', 'wa', 'ワ'], ['を', 'wo', 'ヲ'],
    ['ん', 'n', 'ン']
]

dakuon = [
    ['が', 'ga', 'ガ'], ['ぎ', 'gi', 'ギ'], ['ぐ', 'gu', 'グ'],
    ['げ', 'ge', 'ゲ'], ['ご', 'go', 'ゴ'], ['ざ', 'za', 'ザ'],
    ['じ', 'ji', 'ジ'], ['ず', 'zu', 'ズ'], ['ぜ', 'ze', 'ゼ'],
    ['ぞ', 'zo', 'ゾ'], ['だ', 'da', 'ダ'], ['ぢ', 'ji', 'ヂ'],
    ['づ', 'zu', 'ヅ'], ['で', 'de', 'デ'], ['ど', 'do', 'ド'],
    ['ば', 'ba', 'バ'], ['び', 'bi', 'ビ'], ['ぶ', 'bu', 'ブ'],
    ['べ', 'be', 'ベ'], ['ぼ', 'bo', 'ボ'], ['ぱ', 'pa', 'パ'],
    ['ぴ', 'pi', 'ピ'], ['ぷ', 'pu', 'プ'], ['ぺ', 'pe', 'ペ'],
    ['ぽ', 'po', 'ポ']
]

youon = [
    ['きゃ', 'kya', 'キャ'], ['きゅ', 'kyu', 'キュ'], ['きょ', 'kyo', 'キョ'],
    ['しゃ', 'sha', 'シャ'], ['しゅ', 'shu', 'シュ'], ['しょ', 'sho', 'ショ'],
    ['ちゃ', 'cha', 'チャ'], ['ちゅ', 'chu', 'チュ'], ['ちょ', 'cho', 'チョ'],
    ['にゃ', 'nya', 'ニャ'], ['にゅ', 'nyu', 'ニュ'], ['にょ', 'nyo', 'ニョ'],
    ['ひゃ', 'hya', 'ヒャ'], ['ひゅ', 'hyu', 'ヒュ'], ['ひょ', 'hyo', 'ヒョ'],
    ['みゃ', 'mya', 'ミャ'], ['みゅ', 'myu', 'ミュ'], ['みょ', 'myo', 'ミョ'],
    ['りゃ', 'rya', 'リャ'], ['りゅ', 'ryu', 'リュ'], ['りょ', 'ryo', 'リョ'],
    ['ぎゃ', 'gya', 'ギャ'], ['ぎゅ', 'gyu', 'ギュ'], ['ぎょ', 'gyo', 'ギョ'],
    ['じゃ', 'ja', 'ジャ'], ['じゅ', 'ju', 'ジュ'], ['じょ', 'jo', 'ジョ'],
    ['びゃ', 'bya', 'ビャ'], ['びゅ', 'byu', 'ビュ'], ['びょ', 'byo', 'ビョ'],
    ['ぴゃ', 'pya', 'ピャ'], ['ぴゅ', 'pyu', 'ピュ'], ['ぴょ', 'pyo', 'ピョ']
]

def get_audio_filename(text):
    # 利用平假名的 Unicode 编码生成唯一文件名
    code = "-".join(format(ord(c), 'x') for c in text)
    return f"audio/{code}.mp3"

# 创建音频存放目录
os.makedirs("audio", exist_ok=True)

all_groups = seion + dakuon + youon

print("正在下载音频文件……")

for group in all_groups:
    text = group[0]  # 使用平假名作为音频内容
    filename = get_audio_filename(text)
    if not os.path.exists(filename):
        try:
            tts = gTTS(text=text, lang='ja', slow=False)
            tts.save(filename)
            print(f"已下载 {text} -> {filename}")
        except Exception as e:
            print(f"下载 {text} 时出错：{e}")
    else:
        print(f"{text} 的音频已存在 -> {filename}")

print("音频下载完成！")
